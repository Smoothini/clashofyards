<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>BYM Tracker</title>
    <script src="https://unpkg.com/htmx.org@1.9.3"></script>
    <script src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js" defer></script>
    <style>
        body { font-family: Arial, sans-serif; margin:0; padding:0; }
        header, footer { background:#222; color:white; padding:1rem; display:flex; align-items:center; justify-content:space-between; }
        header a, footer a { color:white; margin-left:1rem; text-decoration:none; }
        .logo { font-weight:bold; font-size:1.2rem; }
        main { padding:2rem; }
        .center { text-align:center; margin-bottom:2rem; }
        .card { border:1px solid #ccc; padding:1rem; margin-bottom:1rem; border-radius:6px; }
        .progress-bar { background:#eee; border-radius:6px; height:20px; width:100%; margin-top:0.5rem; position:relative; }
        .progress { background:#4caf50; height:100%; width:0%; border-radius:6px; }
        .tabs { display:flex; border-bottom:1px solid #ccc; margin-bottom:1rem; }
        .tab { padding:0.5rem 1rem; cursor:pointer; border-top-left-radius:6px; border-top-right-radius:6px; background:#f5f5f5; margin-right:0.25rem; }
        .tab.active { background:white; border:1px solid #ccc; border-bottom:none; }
        .tab-content { border:1px solid #ccc; padding:1rem; border-radius:6px; }
        button { padding:0.5rem 1rem; border:none; border-radius:4px; background:#4caf50; color:white; cursor:pointer; }
        button:disabled { background:#888; cursor:not-allowed; }
        img { max-height:64px; vertical-align:middle; margin-right:1rem; }
        .grid { display:grid; grid-template-columns:repeat(auto-fill, minmax(120px, 1fr)); gap:1rem; }
    </style>
</head>
<body x-data="{ currentTab: 'resources', thProgress: 50 }">

    <!-- Header -->
    <header>
        <div class="logo">BYM Tracker</div>
        <nav>
            <a href="#">Home</a>
            <a href="#">About</a>
            <a href="#">Discord</a>
        </nav>
    </header>

    <main>

        <!-- Login Page -->
        <div id="loginPage" x-show="!$store.user">
            <div class="center">
                <button @click="$store.user = { name:'MockDiscordUser' }">Connect with Discord</button>
            </div>
        </div>

        <!-- Main Dashboard -->
        <div id="dashboard" x-show="$store.user">

            <!-- Discord Name -->
            <div class="center">
                <h2 x-text="$store.user.name"></h2>
            </div>

            <!-- Townhall -->
            <div class="card" style="display:flex; align-items:center; justify-content:space-between;">
                <div style="display:flex; align-items:center;">
                    <img src="https://via.placeholder.com/64" alt="Townhall">
                    <div>
                        <div>Townhall Level 5</div>
                        <div class="progress-bar">
                            <div class="progress" :style="'width:' + thProgress + '%'"></div>
                        </div>
                    </div>
                </div>
                <button @click="thProgress=0; setTimeout(()=>thProgress=100, 5000)">Upgrade TH</button>
            </div>

            <!-- Tabs -->
            <div>
                <div class="tabs">
                    <div class="tab" :class="{ 'active': currentTab=='resources' }" @click="currentTab='resources'">Resources</div>
                    <div class="tab" :class="{ 'active': currentTab=='buildings' }" @click="currentTab='buildings'">Buildings</div>
                    <div class="tab" :class="{ 'active': currentTab=='defensive' }" @click="currentTab='defensive'">Defensive</div>
                    <div class="tab" :class="{ 'active': currentTab=='locker' }" @click="currentTab='locker'">Monster Locker</div>
                    <div class="tab" :class="{ 'active': currentTab=='academy' }" @click="currentTab='academy'">Academy</div>
                    <div class="tab" :class="{ 'active': currentTab=='lab' }" @click="currentTab='lab'">Monster Lab</div>
                    <div class="tab" :class="{ 'active': currentTab=='champs' }" @click="currentTab='champs'">Champs</div>
                    <div class="tab" :class="{ 'active': currentTab=='stats' }" @click="currentTab='stats'">Stats</div>
                </div>

                <div class="tab-content">
                    <!-- Resources Tab -->
                    <div x-show="currentTab=='resources'" class="grid">
                        <div class="card">Gold Mine <br> Level 3 <button>Upgrade</button></div>
                        <div class="card">Goo Factory <br> Level 2 <button>Upgrade</button></div>
                        <div class="card">Pebble Quarry <br> Level 4 <button>Upgrade</button></div>
                    </div>

                    <!-- Buildings Tab  #1d232a bg-->
                    <!-- Buildings Tab (Clash Ninja style) -->
<div x-show="currentTab=='buildings'" x-data="{
    buildings: [
        {
            name: 'Sniper Tower',
            img: 'sniper.png',
            units: [
                { level: 10, maxLevel: 10, upgrade: null },
                { level: 10, maxLevel: 10, upgrade: null },
                { level: 10, maxLevel: 10, upgrade: null },
                { level: 10, maxLevel: 10, upgrade: null },
                { level: 9, maxLevel: 10, upgrade: { resources: { gold: 1000, elixir: 500, dark: 200, gem: 0 }, time: '2d' } }
            ]
        },
        {
            name: 'Cannon Tower',
            img: 'cannon.png',
            units: [
                { level: 6, maxLevel: 6, upgrade: null },
                { level: 6, maxLevel: 6, upgrade: null },
                { level: 6, maxLevel: 6, upgrade: null },
                { level: 6, maxLevel: 6, upgrade: null },
                { level: 4, maxLevel: 6, upgrade: { resources: { gold: 2000, elixir: 1000, dark: 500, gem: 0 }, time: '3d' } },
                { level: 4, maxLevel: 6, upgrade: { resources: { gold: 2000, elixir: 1000, dark: 500, gem: 0 }, time: '3d' } }
            ]
        }
    ],
    formatResources(res) {
        return Object.entries(res)
            .filter(([_, val]) => val > 0)
            .map(([key,val]) => key + ': ' + val)
            .join(' / ');
    }
}">
    <table style="width:100%; border-collapse:collapse;">
        <thead>
            <tr style="background:#eee;">
                <th>Building</th>
                <th>Level</th>
                <th>Status</th>
                <th>Upgrade</th>
                <th>Cost / Time</th>
            </tr>
        </thead>
        <tbody>
            <template x-for="building in buildings" :key="building.name">
                <template x-for="(unit, index) in building.units" :key="index">
                    <tr style="border-bottom:1px solid #ccc;">
                        <!-- Show image only once per building type -->
                        <td x-show="index===0" :rowspan="building.units.length" style="vertical-align:middle;">
                            <img :src="building.img" :alt="building.name" style="margin-right:0.5rem;">
                            <span x-text="building.name"></span>
                        </td>

                        <!-- Unit level -->
                        <td x-text="unit.level + '/' + unit.maxLevel"></td>

                        <!-- Status -->
                        <td>
                            <span x-show="!unit.upgrade" style="color:green;">✔ Maxed</span>
                            <span x-show="unit.upgrade">⬆ Pending</span>
                        </td>

                        <!-- Upgrade button -->
                        <td>
                            <button x-show="unit.upgrade" @click="alert('Start Upgrade Timer')">Upgrade</button>
                            <span x-show="!unit.upgrade">-</span>
                        </td>

                        <!-- Cost / Time -->
                        <td>
                            <span x-show="unit.upgrade" x-text="formatResources(unit.upgrade.resources) + ' - ' + unit.upgrade.time"></span>
                            <span x-show="!unit.upgrade">-</span>
                        </td>
                    </tr>
                </template>
            </template>
        </tbody>
    </table>
</div>



                    <!-- Defensive Tab -->
                    <div x-show="currentTab=='defensive'" class="grid">
                        <div class="card">Cannon <br> Level 4 <button>Upgrade</button></div>
                        <div class="card">Trap <br> Level 2 <button>Upgrade</button></div>
                    </div>

                    <!-- Monster Locker Tab -->
                    <div x-show="currentTab=='locker'" class="grid">
                        <div class="card">Monster A <br> Unlock <button>Unlock</button></div>
                        <div class="card">Monster B <br> Unlock <button>Unlock</button></div>
                    </div>

                    <!-- Academy Tab -->
                    <div x-show="currentTab=='academy'" class="grid">
                        <div class="card">Monster A <br> Level 3 <button>Upgrade</button></div>
                        <div class="card">Monster B <br> Level 2 <button>Upgrade</button></div>
                    </div>

                    <!-- Monster Lab Tab -->
                    <div x-show="currentTab=='lab'" class="grid">
                        <div class="card">Ability 1 <button>Research</button></div>
                        <div class="card">Ability 2 <button>Research</button></div>
                    </div>

                    <!-- Champs Tab -->
                    <div x-show="currentTab=='champs'" class="grid">
                        <div class="card">Champion 1 <br> Feed <button>Feed</button></div>
                        <div class="card">Champion 2 <br> Feed <button>Feed</button></div>
                    </div>

                    <!-- Stats Tab -->
                    <div x-show="currentTab=='stats'">
                        <p>Total resources spent: 12345 Goo, 678 Pebbles, 910 Twigs</p>
                        <p>Time to max TH: 2d 5h</p>
                        <p>Completion: 63%</p>
                    </div>
                </div>
            </div>

        </div>

    </main>

    <!-- Footer -->
    <footer>
        <div>BYM Tracker &copy; 2025</div>
        <div>
            <a href="#">GitHub</a>
            <a href="#">Discord</a>
            <a href="#">About</a>
        </div>
    </footer>

    <script>
        // Alpine.js store for simple mock auth
        document.addEventListener('alpine:init', () => {
            Alpine.store('user', null);
        });
    </script>

</body>
</html>
